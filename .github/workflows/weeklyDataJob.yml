# Step 1: Checkout
- uses: actions/checkout@v3

# Step 2: Setup Node
- uses: actions/setup-node@v3
  with:
    node-version: 20

# Step 2.5: Install dependencies
- name: Install dependencies
  run: npm ci

# Step 3: Authenticate with GCP
- uses: google-github-actions/auth@v2
  with:
    credentials_json: ${{ secrets.GCP_SA_KEY }}

- uses: google-github-actions/setup-gcloud@v2
  with:
    project_id: klett-cx-analytics

# Step 4: Run script
- name: Run clean-fetch-districts.cjs
  run: node scripts/clean-fetch-districts.cjs
